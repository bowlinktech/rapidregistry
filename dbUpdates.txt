/** grace 03.16.2015 12:41PM **/
INSERT INTO `rapidregistry`.`lu_processstatus` (`id`, `displayCode`, `displayText`, `description`, `status`, `isCustom`, `endUserDisplayCode`, `endUserDisplayText`, `endUserDescription`) VALUES ('2', 'PLH', 'Prepared to Load to Health-e-Link', 'File is in the process of being load on HEL for processing', 1, 0, 'PLH', 'File is in the process of being load on HEL for processing', 'File is in the process of being load on HEL for processing');
UPDATE `rapidregistry`.`lu_processstatus` SET `category`='Batch' WHERE `id`='2';

/** grace 03.17.2015 11:47PM **/
ALTER TABLE `rapidregistry`.`programuploads` 
CHANGE COLUMN `fileName` `uploadedFileName` VARCHAR(55) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ;

/** 03.18.2015 11:58 AM grace **/
delete from  rapidregistry.lu_processstatus;

INSERT INTO `rapidregistry`.`lu_processstatus` VALUES (1,'batch','SFV','Submission Failed Validation','Error condition: The submission has failed either size, delimiter or type constraints. Please review submission, correct and resubmit.','','\0','2013-12-19 10:29:16','SFV','Submission Failed Validation','Error condition: The submission has failed either size, delimiter or type constraints. Please review submission, correct and resubmit.'),(2,'batch','SSA','Source Submission Accepted','Normal condition: The submission has been accepted and will be processed shortly.','','\0','2013-12-19 10:29:16','SSA','Source Submission Accepted','Normal condition: The submission has been accepted and will be processed shortly.'),(3,'batch','SRS','Source Re-submitted','Normal condition: Error transactions have been corrected by the user and the submission has been resubmitted for processing.','','\0','2013-12-19 10:29:16','SSA','Source Submission Accepted','Normal condition: The submission has been accepted and will be processed shortly.'),(4,'batch','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.','','\0','2013-12-19 10:29:16','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(5,'batch','SRP','Submission Release Pending','Normal condition: The audit report for the submission must be reviewed by the submitter. After all errors are resolved (if there are any), the submission is released by the user.','','\0','2013-12-19 10:29:16','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(6,'batch','SR','Submission Released','Normal condition: A submission has been released for delivery to the destination.','','\0','2013-12-19 10:29:16','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(7,'batch','SRJ','Submission Rejected','Error condition: One or more errors occurred in the submission and the submission was rejected. Please review the audit report.','','\0','2013-12-19 10:29:16','SPE','Submission processing error','Error condition: An unexpected error occurred during processing. Please review your submission audit report. Please contact the help desk if necessary.'),(8,'batch','SS','Submission Saved','Normal condition: A partially completed transaction was saved for later completion by the user using the eReferral Gateway.','','\0','2013-12-19 10:29:16','SS','Submission Saved','Normal condition: A partially completed transaction was saved for later completion by the user using the eReferral Gateway.'),(9,'transaction','LOA','Loaded','Normal condition: The transaction has been successfully loaded for processing.','','\0','2013-12-19 10:29:17','LOA','Loaded','Normal condition: The transaction has been successfully loaded for processing.'),(10,'transaction','TTP','Transaction Translation Pending','Normal condition: The transaction is awaiting translation to destination format.','','\0','2013-12-19 10:29:17','TTP','Transaction Translation Pending','Normal condition: The transaction is awaiting translation to destination format.'),(11,'transaction','INV','Transaction Invalid','Error condition: A valid configuration could not be found for the transaction. Please contact the help desk.','','\0','2013-12-19 10:29:17','INV','Transaction Invalid','Error condition: A valid configuration could not be found for the transaction. Please contact the help desk.'),(12,'transaction','TRP','Transaction Release Pending','Normal condition: The transaction has been successfully processed and is pending release by the submitter.','','\0','2013-12-19 10:29:17','TRP','Transaction Release Pending','Normal condition: The transaction has been successfully processed and is pending release by the submitter.'),(13,'transaction','REJ','Transaction Rejected','Error condition: The transaction has failed translation or other processing rules. Please review the audit report.','','\0','2013-12-19 10:29:17','REJ','Transaction Rejected','Error condition: The transaction has failed translation or other processing rules. Please review the audit report.'),(14,'transaction','ERR','Transaction Errored','Error condition: The transaction has failed translation or other processing rules but may be corrected in the eReferral Gateway.','','\0','2013-12-19 10:29:17','ERR','Transaction Errored','Error condition: The transaction has failed translation or other processing rules but may be corrected in the eReferral Gateway.'),(15,'transaction','SAV','Transaction Saved','Normal condition: A partially completed transaction was saved for later completion by the user using the eReferral Gateway.','','\0','2013-12-19 10:29:17','SAV','Transaction Saved','Normal condition: A partially completed transaction was saved for later completion by the user using the eReferral Gateway.'),(16,'transaction','PAS','Transaction Passed','Normal condition: The transaction contains errors but the users configuration is set up to allow errors to be accepted.','','\0','2013-12-19 10:29:17','PAS','Transaction Passed','Normal condition: The transaction contains errors but the users configuration is set up to allow errors to be accepted.'),(17,'transaction','CLS','Transaction Closed','Normal condition: This is when user closes the transaction in the eRG.  When a transaction is closed, users can no longer create feedback reports.','','\0','2013-12-19 10:29:17','CLS','Transaction Closed','Normal condition: This is when user closes the transaction in the eRG.  When a transaction is closed, users can no longer create feedback reports.'),(18,'transaction','TPP','Transaction Pending Pickup','Normal condition: The destination transaction is created and is waiting for the user to view or download.','','\0','2013-12-19 10:29:17','TPP','Transaction Pending Pickup','Normal condition: The destination transaction is created and is waiting for the user to view or download.'),(19,'transaction','TPO','Transaction  Pending Output','Normal condition: This is a target status.  The transaction is ready for output generation.  When a batch is SPC, the targets will be in TPO so that the output scheduler will pick it up and process it.','','\0','2013-12-19 20:14:36','TPO','Transaction  Pending Output','Normal condition: This is a target status.  The transaction is ready for output generation.  When a batch is SPC, the targets will be in TPO so that the output scheduler will pick it up and process it.'),(20,'transaction','REC','Transaction Received','Normal condition: The destination user has downloaded or viewed the transaction. ','','\0','2013-12-31 09:23:14','REC','Transaction Received','Normal condition: The destination user has downloaded or viewed the transaction. '),(21,'batch','DNP','Do Not Process','Normal condition: A submission has been flagged by the user so that it will not be processed.','','\0','2014-01-10 15:28:52','DNP','Do Not Process','Normal condition: A submission has been flagged by the user so that it will not be processed.'),(22,'batch','SDL','Submission Delivery Locked','Normal condition: One or more transactions within a submission have been viewed/received by the destination. Some transactions in the submission have not yet been viewed/received.','','\0','2014-01-10 15:28:52','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(23,'batch','SSR','Source Submission Received','Normal condition: All transactions in a submission have been viewed/received by the destination.','','\0','2014-01-10 15:28:52','SSR','Source Submission Received','Normal condition: All transactions in a submission have been viewed/received by the destination.'),(24,'batch','SPC','Submission Processing Completed','Normal condition: submission transactions have been successfully reviewed and validated.','','\0','2014-01-10 15:28:52','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(25,'batch','TBP','Target Being Processed','Normal condition: Transactions are being created for delivery to the destination.','','\0','2014-01-24 13:47:34','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(28,'batch','SDC','Submission Delivery Completed','Normal condition: All transactions for the submission have been delivered to the destination(s). NOTE: Source submission received (SSR) is the status which indicates that the destination has actually RECEIVED the transaction(s).','','\0','2014-01-27 11:22:47','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(29,'batch','SPE','Submission Processing Error','Error condition: An unexpected error occurred during processing. Please contact the help desk.','','\0','2014-01-27 11:22:47','SPE','Submission processing error','Error condition: An unexpected error occurred during processing. Please review your submission audit report. Please contact the help desk if necessary.'),(30,'batch','TPE','Target Processing Error','Error condition: An unexpected error occurred during processing. Please contact the help desk.','','\0','2014-01-27 11:22:47','SPE','Submission processing error','Error condition: An unexpected error occurred during processing. Please review your submission audit report. Please contact the help desk if necessary.'),(31,'transaction','CNL','Transaction Canceled','Normal condition: The is an ERG status. User cancels the transaction via the eRG. No subsequent activity is allowed for the transaction.','','\0','2014-03-05 23:41:39','CNL','Transaction Canceled','Normal condition: The is an ERG status. User cancels the transaction via the eRG. No subsequent activity is allowed for the transaction.'),(32,'batch','SCN','Submission Canceled',NULL,'','\0','2014-03-05 23:41:39','DNP','Do Not Process','Normal condition: A submission has been flagged by the user so that it will not be processed.'),(33,'transaction','TPE','Transaction Processing Error','Error condition: An unexpected error occurred during processing. Please contact the help desk.','','\0','2014-03-05 23:41:42','TPE','Transaction Processing Error','Error condition: An unexpected error occurred during processing. Please contact the help desk.'),(35,'batch','SFR','Submission File Reset','This is when resets a SFTP or Rhapsody file.  The original file is copied back to input folder and a new batch number is reassigned.','','\0','2014-05-16 17:17:51','DNP','Do Not Process','Normal condition: The submission has been accepted and will be processed shortly.'),(36,'batch','SSL','Source Submission Loaded','Normal condition: The submission has been successfully loaded for processing.','','\0','2014-06-03 23:55:17','SBP','Submission Being Processed','Normal condition: The submission is currently being processed.'),(37,'transaction','TCP','Transaction Creation In Process','Normal condition: The transaction is being processed.','','\0','2014-06-09 22:38:56','TCP','Transaction Creation In Process','Normal condition: The transaction is being processed.'),(38,'batch','SBL','Submission Being Loaded','Normal condition: The transaction is being processed.','','\0','2014-06-17 03:42:57','SSA','Source Submission Accepted','Normal condition: The submission has been accepted and will be processed shortly.'),(39,'batch','SLE','Submission Loading Error','Error condition: The submission could not be loaded for processing. Please review the submission, correct and resubmit.','','\0','2014-06-17 03:42:57','SPE','Submission processing error','Error condition: An unexpected error occurred during processing. Please review your submission audit report. Please contact the help desk if necessary.');
INSERT INTO `rapidregistry`.`lu_processstatus` (`id`,`category`, `displayCode`, `displayText`, `description`, `endUserDisplayCode`, `endUserDisplayText`, `endUserDescription`) VALUES (40, 'batch', 'SRR', 'Submission Ready for RR', 'Submission is ready to be process through RR', 'SRR', 'Submission Ready for RR', 'Submission is ready to be process through RR');

/** 03.19.2015 01:11 AM grace **/
INSERT INTO `rapidregistry`.`lu_processstatus` (`id`, `category`, `displayCode`, `displayText`, `description`, `endUserDisplayCode`, `endUserDisplayText`, `endUserDescription`) VALUES ('41', 'batch', 'SMH', 'Submission Moved To Health-e-link', 'Submission Moved To Health-e-link', 'SMH', 'Submission Moved To Health-e-link', 'Submission Moved To Health-e-link');
INSERT INTO `rapidregistry`.`lu_processstatus` (`id`, `category`, `displayCode`, `displayText`, `description`, `endUserDisplayCode`, `endUserDisplayText`, `endUserDescription`) VALUES ('42', 'batch', 'SEH', 'Submission Errored at HEL', 'Submission Errored while file was being moved to HEL', 'SEH', 'Submission Errored at HEL', 'Submission Errored while file was being moved to HEL');

ALTER TABLE `rapidregistry`.`programuploads` 
CHANGE COLUMN `batchFileName` `assignedFileName` VARCHAR(55) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
CHANGE COLUMN `batchId` `assignedId` VARCHAR(55) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ;

/** Chad 3.24.2015 @ 10:05 AM **/
CREATE TABLE `rapidregistry`.`lu_activityCodeCategories` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '	',
  `category` VARCHAR(55) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC));

CREATE TABLE `rapidregistry`.`rel_activityCodeCategories` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `activityCodeId` INT NOT NULL,
  `categoryId` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC));
  
  
/** 03.19.2015 11:18 AM  grace **/
UPDATE `rapidregistry`.`lu_processstatus` SET `displayCode`='SFE', `displayText`='Submission Moving File Errored', `description`='Submission Errored while file was being moved to process folder', `endUserDisplayCode`='SFE', `endUserDisplayText`='Submission Moving File Errored', `endUserDescription`='Submission Errored while file was being moved to process folder' WHERE `id`='42';

CREATE TABLE `rapidregistry`.`lu_encoding` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `encoding` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

INSERT INTO `rapidregistry`.`lu_encoding` (`id`, `encoding`) VALUES (1, 'None');
INSERT INTO `rapidregistry`.`lu_encoding` (`id`, `encoding`) VALUES (2, 'Base64');

ALTER TABLE `rapidregistry`.`programuploadtypes` 
ADD COLUMN `encodingId` INT NOT NULL DEFAULT 1 AFTER `fileDelimId`;

ALTER TABLE `rapidregistry`.`programuploadtypes` 
ADD INDEX `fk_encodingId_idx` (`encodingId` ASC);
ALTER TABLE `rapidregistry`.`programuploadtypes` 
ADD CONSTRAINT `fk_encodingId`
  FOREIGN KEY (`encodingId`)
  REFERENCES `rapidregistry`.`lu_encoding` (`id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
  
  
/** 03.20.2015 10:27 AM grace **/

drop table if exists `rapidregistry`.`movefileslog`;

CREATE TABLE `rapidregistry`.`movefileslog` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `programUploadTypeId` int(11) NOT NULL,
  `statusId` int(11) NOT NULL COMMENT '1 for started\n2 for done',
  `startDateTime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `endDateTime` datetime DEFAULT NULL,
  `folderPath` varchar(75) DEFAULT NULL,
  `notes` text,
  PRIMARY KEY (`id`),
  KEY `pathMethodInd` (`programUploadTypeId`,`folderPath`,`statusId`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;
  
  
/** Grace 03.30.2015 10:21AM **/
CREATE TABLE `rapidregistry`.`lu_transportmethods` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `transportMethod` varchar(45) NOT NULL,
  `active` bit(1) NOT NULL DEFAULT b'0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1; 


ALTER TABLE `rapidregistry`.`programuploads` 
ADD COLUMN `transportId` INT NULL AFTER `statusId`;

drop table if exists `rapidregistry`.`movefileslog`;

CREATE TABLE `rapidregistry`.`movefileslog` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `statusId` int(11) NOT NULL COMMENT '1 for started\n2 for done',
  `startDateTime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `endDateTime` datetime DEFAULT NULL,
  `folderPath` varchar(75) DEFAULT NULL,
  `notes` text,
  PRIMARY KEY (`id`),
  KEY `pathMethodInd` (`folderPath`,`statusId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


  