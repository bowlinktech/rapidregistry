<<<<<<< HEAD
/** grace 11212014 01:02PM **/
ALTER TABLE `rapidregistry`.`users` 
ADD COLUMN `randomSalt` blob NULL AFTER `resetCode`,
ADD COLUMN `encryptedPw` blob NULL AFTER `randomSalt`;

ALTER TABLE `rapidregistry`.`users` 
CHANGE COLUMN `resetCode` `resetCode` VARCHAR(50) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ;


RUN JOB TO CHANGE PASSWORD

/** 11.25.2015 12:18AM **/
ALTER TABLE `rapidregistry`.`users` 
DROP COLUMN `password`;


/** 12/5/2014 2:43AM **/
ALTER TABLE `rapidregistry`.`surveys` 
CHANGE COLUMN `allowEngagement` `allowEngagement` BIT(1) NULL DEFAULT 1 ,
CHANGE COLUMN `duplicatesAllowed` `duplicatesAllowed` BIT(1) NULL DEFAULT 1 ;

/** 12/5/2014 10:17PM **/
ALTER TABLE `rapidregistry`.`engagementSurveys` 
CHANGE COLUMN `dateComplated` `dateCompleted` DATETIME NOT NULL ;

ALTER TABLE `rapidregistry`.`engagementSurveys` 
CHANGE COLUMN `completed` `completed` BIT(1) NOT NULL DEFAULT 0 ;

ALTER TABLE `rapidregistry`.`engagementSurveys` 
CHANGE COLUMN `id` `id` INT(11) NOT NULL AUTO_INCREMENT ;

ALTER TABLE `rapidregistry`.`engagementSurveys` 
CHANGE COLUMN `dateCompleted` `dateCompleted` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ;

/** 12/8/2014 1:04AM **/
CREATE TABLE `rapidregistry`.`user_activityLog` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `systemUserId` INT NOT NULL,
  `surveyId` INT NULL,
  `activityDesc` VARCHAR(255) NULL,
  `pageAccessed` VARCHAR(45) NULL,
  `controller` VARCHAR(45) NULL,
  `dateCreated` DATETIME NULL DEFAULT current_timestamp,
  PRIMARY KEY (`id`));

/** 12-8-2014 11:05PM **/
ALTER TABLE `rapidregistry`.`survey_questions` 
ADD COLUMN `questionNum` INT NOT NULL DEFAULT 1 AFTER `dateCreated`;


/**12/9/2014 **/
ALTER TABLE `rapidregistry`.`surveys` 
DROP COLUMN `surveyscol`;

ALTER TABLE `rapidregistry`.`survey_pages` 
DROP INDEX `surveyId_idx` ,
ADD UNIQUE INDEX `uni_surveyIdPageNum` (`surveyId` ASC, `pageNum` ASC);


=======
/** Chad 12/2/2014 @ 10:36 PM **/
ALTER TABLE `rapidregistry`.`program_patientFields` 
ADD COLUMN `searchField` BIT(1) NOT NULL DEFAULT b'0' AFTER `dataGridColumn`,
ADD COLUMN `summaryField` BIT(1) NOT NULL DEFAULT b'0' AFTER `searchField`;

DROP TABLE `rapidregistry`.`program_patientSummaryFields`;

DROP TABLE `rapidregistry`.`program_patientSearchFields`;

ALTER TABLE `rapidregistry`.`program_engagementFields` 
ADD COLUMN `searchField` BIT(1) NOT NULL DEFAULT b'0' AFTER `dataGridColumn`,
ADD COLUMN `summaryField` BIT(1) NOT NULL DEFAULT b'0' AFTER `searchField`;

/** Chad 12/4/2014 @ 4:25 PM **/
ALTER TABLE `rapidregistry`.`modifiedFields` 
CHANGE COLUMN `id` `id` INT(11) NOT NULL AUTO_INCREMENT ;

ALTER TABLE `rapidregistry`.`modifiedFields` 
ADD COLUMN `oldFieldValue` VARCHAR(255) NULL AFTER `dateCreated`,
ADD COLUMN `newFieldValue` VARCHAR(255) NULL AFTER `oldFieldValue`;

/** Chad 12/8/2014 @ 8:28 AM **/
ALTER TABLE `rapidregistry`.`dataElements` 
ADD COLUMN `answerType` INT NOT NULL DEFAULT 3 AFTER `status`;

/** Chad 12/8/2014 @ 11:34 AM **/
ALTER TABLE `rapidregistry`.`program_patientFields` 
ADD COLUMN `searchDspPos` INT(11) NOT NULL DEFAULT '1' AFTER `summaryField`;

ALTER TABLE `rapidregistry`.`program_engagementFields` 
ADD COLUMN `searchDspPos` INT(11) NOT NULL DEFAULT '1' AFTER `summaryField`;
>>>>>>> b8d6f44cc9e3b8b93df76458b19d750ba1e9516e
