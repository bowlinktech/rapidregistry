
/** Chad 12-15-2014 @ 2:23 PM **/
/**  You must first remove the index and foreign keys that look at engagmentId **/
ALTER TABLE `rapidregistry`.`patientEngagements` 
CHANGE COLUMN `id` `id` INT(11) NOT NULL AUTO_INCREMENT ,
ADD COLUMN `dateCreated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP AFTER `systemUserId`,
ADD UNIQUE INDEX `id_UNIQUE` (`id` ASC);

/** Chad 12-22-2014 @ 9:33 AM **/
CREATE TABLE `modifiedEngagementFields` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `engagementId` int(11) NOT NULL,
  `fieldId` int(11) NOT NULL,
  `systemUserId` int(11) NOT NULL,
  `dateCreated` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `oldFieldValue` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `newFieldValue` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `engagementId_idx` (`engagementId`),
  KEY `modifiedfieldId_idx` (`fieldId`),
  KEY `fk_modifiedFields_userId` (`systemUserId`),
  CONSTRAINT `fk_modifiedEngagementFields_fieldId` FOREIGN KEY (`fieldId`) REFERENCES `dataElements` (`id`),
  CONSTRAINT `fk_modifiedEngagementFields_engagementId` FOREIGN KEY (`engagementId`) REFERENCES `patientEngagements` (`id`),
  CONSTRAINT `fk_modifiedEngagementFields_userId` FOREIGN KEY (`systemUserId`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/** Chad 12-24-2014 @ 10:33 AM **/
CREATE TABLE `rapidregistry`.`providers` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `programId` INT NOT NULL,
  `status` VARCHAR(45) NOT NULL DEFAULT '(1)',
  `firstName` VARCHAR(255) NOT NULL COMMENT '			',
  `lastName` VARCHAR(255) NOT NULL,
  `address` VARCHAR(255) NULL,
  `address2` VARCHAR(255) NULL,
  `city` VARCHAR(255) NULL,
  `state` VARCHAR(255) NULL,
  `zipCode` VARCHAR(15) NULL,
  `dateCreated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC));


ALTER TABLE `rapidregistry`.`providers` 
ADD COLUMN `phoneNumber` VARCHAR(25) NULL AFTER `zipCode`;

/** Chad 12-30-2014 @ 11:19 AM **/
CREATE TABLE `rapidregistry`.`providerHierarchyAssoc` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `providerId` INT NOT NULL,
  `hierarchyDetailId` INT NOT NULL,
  `dateCreated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC));

ALTER TABLE `rapidregistry`.`providerHierarchyAssoc` 
ADD INDEX `idx_providerId` (`providerId` ASC);

/** grace 01.05.2015 12:56AM **/
ALTER TABLE `rapidregistry`.`survey_answers` 
ADD COLUMN `answerNum` INT NOT NULL DEFAULT 1 AFTER `dateCreated`;

/** grace 01.13.2015 12:49AM **/
ALTER TABLE `rapidregistry`.`survey_answers` 
CHANGE COLUMN `answer` `answerOrLabel` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL ,
ADD COLUMN `numericOnly` BIT(1) NOT NULL DEFAULT 0 AFTER `answerNum`;

ALTER TABLE `rapidregistry`.`survey_answers` 
DROP COLUMN `answerNum`;



/** Chad 01-13-2015 @ 11:59 PM **/
ALTER TABLE `rapidregistry`.`programPatients` 
ADD COLUMN `status` BIT(1) NOT NULL DEFAULT b'1' AFTER `MCIReview`;

CREATE TABLE `rapidregistry`.`mergeLogs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `newClientId` INT NOT NULL,
  `similarClientId` INT NOT NULL,
  `dateMerged` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC));


/** Chad 01-14-2015 @ 12:11 PM **/
CREATE TABLE `rapidregistry`.`lu_providerTypes` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `displayText` VARCHAR(45) NOT NULL,
  `status` BIT(1) NOT NULL DEFAULT b'1',
  `dateCreated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));

INSERT INTO `rapidregistry`.`lu_providerTypes` (`displayText`, `status`) VALUES ('Physician', 1);
INSERT INTO `rapidregistry`.`lu_providerTypes` (`displayText`, `status`) VALUES ('NP/APRN/CNM/PA', 1);
INSERT INTO `rapidregistry`.`lu_providerTypes` (`displayText`, `status`) VALUES ('RN/LPN', 1);
INSERT INTO `rapidregistry`.`lu_providerTypes` (`displayText`, `status`) VALUES ('Counselor/CHE', 1);

CREATE TABLE `rapidregistry`.`lu_primaryReimbursement` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `displayText` VARCHAR(45) NOT NULL,
  `status` BIT(1) NOT NULL DEFAULT b'1',
  `dateCreated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));

INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('Medicaid', 1);
INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('Private Insurance', 1);
INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('No Charge / Title X', 1);
INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('Self Pay - Partial', 1);
INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('State Funding / DPH (MA Only)', 1);
INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('Health Safety Net (MA Only)', 1);
INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('Other', 1);
INSERT INTO `rapidregistry`.`lu_primaryReimbursement` (`displayText`, `status`) VALUES ('Insurance Exchange', 1);

CREATE TABLE `rapidregistry`.`lu_principalHealthInsurance` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `displayText` VARCHAR(45) NOT NULL,
  `status` BIT(1) NOT NULL DEFAULT b'1',
  `dateCreated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));

INSERT INTO `rapidregistry`.`lu_principalHealthInsurance` (`displayText`, `status`) VALUES ('Public Insurance', 1);
INSERT INTO `rapidregistry`.`lu_principalHealthInsurance` (`displayText`, `status`) VALUES ('Private Insurance', 1);
INSERT INTO `rapidregistry`.`lu_principalHealthInsurance` (`displayText`, `status`) VALUES ('Uninsured', 1);
INSERT INTO `rapidregistry`.`lu_principalHealthInsurance` (`displayText`, `status`) VALUES ('Unknown / not reported', 1);

CREATE TABLE `rapidregistry`.`storage_engagementMedicalServices` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `engagementId` INT NOT NULL,
  `engagementFieldId` INT(11) NULL DEFAULT 0,
  `codeId` INT NULL DEFAULT 0,
  PRIMARY KEY (`id`));

ALTER TABLE `rapidregistry`.`storage_engagementMedicalServices` 
ADD COLUMN `textValue` VARCHAR(500) NULL DEFAULT NULL AFTER `codeId`;

ALTER TABLE `rapidregistry`.`lu_activityCodes` 
CHANGE COLUMN `code` `code` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ;

ALTER TABLE `rapidregistry`.`storage_engagements` 
ADD COLUMN `providerTypeId` INT(11) NULL DEFAULT NULL COMMENT 'Look up value from lu_providerTypes. ' AFTER `dateCreated`,
ADD COLUMN `familySize` INT(11) NOT NULL DEFAULT 1 AFTER `providerTypeId`,
ADD COLUMN `GrossWeeklyIncome` FLOAT NULL DEFAULT 0 AFTER `familySize`,
ADD COLUMN `GrossWeeklyIncomeUnknown` BIT(1) NULL DEFAULT b'0' AFTER `GrossWeeklyIncome`,
ADD COLUMN `primaryReimbursementId` INT(11) NULL DEFAULT NULL COMMENT 'Look up value from lu_primaryReimbursement ' AFTER `GrossWeeklyIncomeUnknown`,
ADD COLUMN `principalHealthInsuranceId` INT(11) NULL DEFAULT NULL COMMENT 'Look up value from lu_principalHealthInsurance. ' AFTER `primaryReimbursementId`,
ADD COLUMN `visitType` VARCHAR(500) NULL DEFAULT NULL AFTER `principalHealthInsuranceId`,
ADD COLUMN `contraceptiveMethodPrimaryId` INT(11) NULL DEFAULT NULL AFTER `visitType`,
ADD COLUMN `contraceptiveMethodAfterId` INT(11) NULL DEFAULT NULL AFTER `contraceptiveMethodPrimaryId`;

CREATE TABLE `rapidregistry`.`lu_contraceptiveMethods` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `displayText` VARCHAR(45) NOT NULL,
  `status` BIT(1) NOT NULL DEFAULT b'1',
  `dateCreated` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`));

INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Abstinence', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Contraceptive Sponge', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Diaphragm / Cervical Cap', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Female Condom', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Female Sterilization', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Fertility Awareness', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Hormonal Implant', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Hormonal Injection - 1 month', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Hormonal Injection - 3 month', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Hormonal Patch', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('IUD', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Male Condom', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Oral Contraceptive', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Spermicide (Used Alone)', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Vaginal Ring', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Vasectomy', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Other Method', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('Method Unknown', 1);
INSERT INTO `rapidregistry`.`lu_contraceptiveMethods` (`displayText`, `status`) VALUES ('No Method', 1);

CREATE TABLE `rapidregistry`.`storage_engagementsMisc` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `engagementId` int(11) NOT NULL,
  `field1` varchar(500) DEFAULT NULL,
  `field2` varchar(500) DEFAULT NULL,
  `field3` varchar(500) DEFAULT NULL,
  `field4` varchar(500) DEFAULT NULL,
  `field5` varchar(500) DEFAULT NULL,
  `field6` varchar(500) DEFAULT NULL,
  `field7` varchar(500) DEFAULT NULL,
  `field8` varchar(500) DEFAULT NULL,
  `field9` varchar(500) DEFAULT NULL,
  `field10` varchar(500) DEFAULT NULL,
  `field11` varchar(500) DEFAULT NULL,
  `field12` varchar(500) DEFAULT NULL,
  `field13` varchar(500) DEFAULT NULL,
  `field14` varchar(500) DEFAULT NULL,
  `field15` varchar(500) DEFAULT NULL,
  `field16` varchar(500) DEFAULT NULL,
  `field17` varchar(500) DEFAULT NULL,
  `field18` varchar(500) DEFAULT NULL,
  `field19` varchar(500) DEFAULT NULL,
  `field20` varchar(500) DEFAULT NULL,
  `field21` varchar(500) DEFAULT NULL,
  `field22` varchar(500) DEFAULT NULL,
  `field23` varchar(500) DEFAULT NULL,
  `field24` varchar(500) DEFAULT NULL,
  `field25` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;


INSERT INTO `rapidregistry`.`lu_answerTypes` (`answerType`) VALUES ('Single Checkbox');
INSERT INTO `rapidregistry`.`lu_answerTypes` (`answerType`) VALUES ('Multiple Checkbox');

/** Chad 01-15-2015 @ 9:30 AM **/
ALTER TABLE `rapidregistry`.`dataElements` 
ADD COLUMN `populateFromTable` VARCHAR(55) NULL DEFAULT NULL AFTER `answerType`;

/** Chad 01-16-2015 @ 10:50 AM **/
ALTER TABLE `rapidregistry`.`lu_insuranceCarriers` 
CHANGE COLUMN `carrier` `displayText` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ,
ADD COLUMN `status` BIT(1) NULL DEFAULT b'1' AFTER `displayText`;

CREATE TABLE `rapidregistry`.`program_engagementFieldValues` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `engagementFieldId` INT NOT NULL,
  `valueId` INT NOT NULL,
  `valueDisplayText` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`));

CREATE TABLE `rapidregistry`.`program_patientFieldValues` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `patientFieldId` INT NOT NULL,
  `valueId` INT NOT NULL,
  `valueDisplayText` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`));

DELETE FROM `rapidregistry`.`lu_answerTypes` WHERE `id`='9';
UPDATE `rapidregistry`.`lu_answerTypes` SET `answerType`='Checkbox' WHERE `id`='8';

ALTER TABLE `rapidregistry`.`program_engagementFields` 
CHANGE COLUMN `fieldDisplayname` `fieldDisplayName` VARCHAR(55) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL ;

/** Chad 01-19-2015 @ 11:43 AM **/
DELETE * FROM `rapidregistry`.`lu_languages`;

INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('English', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Spanish', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Portuguese', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('C Verdean Creole', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Haitian Creole', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Khmer', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Hmong', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Lao', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Vietnamese', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Chinese', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Polish', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Somali', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('French', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('American Sign', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Russian', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Arabic', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Bosnian', 0, 1);
INSERT INTO `rapidregistry`.`lu_languages` (`displayText`, `isCustom`, `status`) VALUES ('Other/Unknown', 0, 1);

ALTER TABLE `rapidregistry`.`storage_engagements` 
CHANGE COLUMN `id` `id` INT(11) NOT NULL AUTO_INCREMENT ;

/** Chad 01-20-2015 @ 8:58 AM **/
ALTER TABLE `rapidregistry`.`program_engagementFields` 
ADD COLUMN `hideField` BIT(1) NOT NULL DEFAULT b'0' AFTER `searchDspPos`;

ALTER TABLE `rapidregistry`.`program_patientFields` 
ADD COLUMN `hideField` BIT(1) NOT NULL DEFAULT b'0' AFTER `searchDspPos`;
